!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Knuck=t()}(function(){return function n(o,i,u){function s(e,t){if(!i[e]){if(!o[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(a)return a(e,!0);throw(r=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",r}r=i[e]={exports:{}},o[e][0].call(r.exports,function(t){return s(o[e][1][t]||t)},r,r.exports,n,o,i,u)}return i[e].exports}for(var a="function"==typeof require&&require,t=0;t<u.length;t++)s(u[t]);return s}({1:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(o.prototype.view=function(t,e){var r;return"object"==typeof window&&"object"==typeof window.nunjucks?null===(r=window.nunjucks)||void 0===r?void 0:r.render(t,e):null},o);function o(){}r.default=n},{}],2:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,u=t("../utils"),o=(i=Error,o(s,i),s.prototype.setPrefix=function(t){return this.prefix=u.capslock(t)},s.prototype.setMessage=function(r,t){return void 0===t&&(t=[]),t.forEach(function(t,e){r=r.replace("%"+e,t)}),this.name=this.prefix+("["+this.typeCode)+"]",this.message=r+'.\nCheck "'+this.helplink+'" for more help!'},s.typeCode=19400,s);function s(t){var e=i.call(this,t)||this;return e.type="ref",e.typeCode=19400,e.prefix="Error",e.helplink="https://knuck.js.org/errors",e.name=e.prefix+("["+e.typeCode)+"]",void 0!==t&&(e.message=t+'.\nCheck "'+e.helplink+'" for more help!'),e}r.default=o},{"../utils":9}],3:[function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0}),r.InstanceError=r.Error=void 0;var o=n(t("./base"));r.Error=o.default;t=n(t("./instance"));r.InstanceError=t.default},{"./base":2,"./instance":4}],4:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var u,t=i(t("./base")),o=(u=t.default,o(s,u),s.typeCode=19458,s);function s(t,e){void 0===e&&(e="defined");var r=u.call(this)||this;return r.type="ref",r.typeCode=19458,r.prefix="InstanceError",r.helplink="https://knuck.js.org/errors/instance",u.prototype.setMessage.call(r,t+" must be "+("defined"!==e?"of type ":"")+e),r}r.default=o},{"./base":2}],5:[function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},s=u(t("./router")),a=u(t("./controller")),c=u(t("./paths")),f=u(t("./resolve")),p=i(t("./utils"));function l(t){this.realpath="",this.prefix="/","function"==typeof t&&t.apply(this,[s.default,a.default,p])}e.exports=(l.prototype.output=function(){var r,n=this;return s.default.getInstance().all().forEach(function(t){var e=new c.default(p.watchPrefix(t.path,n.prefix),n.realpath);e.setPatterns(s.default.getPatterns()),e.matches()&&(r={route:t,path:e})}),r||null},l.prototype.render=function(t,e){e=e||function(t){"object"==typeof document?document.write(t):console.log(t)},(null==t?void 0:t.path)instanceof c.default&&(this.route=t.route,e.apply(this,[new f.default(t)]))},l.prototype.run=function(e){var r=this,n=this.output();this.render(n,e),setInterval(function(){var t=r.output();(null==t?void 0:t.route.path)!==(null==n?void 0:n.route.path)&&(n=t,r.render(n,e))},5)},l)},{"./controller":1,"./paths":6,"./resolve":7,"./router":8,"./utils":9}],6:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(o.prototype.matches=function(){var n=this,o=this.$parts.length>=this.$vars.length;return this.$parts.forEach(function(t,e){var r=n.$vars[e]||"",e=t.match(n.regex(r));o=o&&(r===t||e&&0<e.length)}),o},o.prototype.regex=function(t){var e="([^/]+)";return"string"==typeof this.$patterns[t]&&(e=this.$patterns[t]),new RegExp(e)},o.prototype.setPattern=function(t,e){return this.$patterns[t]=e},o.prototype.setPatterns=function(t){var e=this;t.forEach(function(t){e.setPattern(t.name,t.pattern)})},o.prototype.getVar=function(r){var n=this,o=-1;return this.$vars.forEach(function(t,e){t=n.$regexp.exec(t)||[];-1===o&&0===t.indexOf(r)&&(o=e)}),this.$parts[o]||null},o.prototype.getVars=function(){var e=this,r={};return this.$varNames.forEach(function(t){r[t]=e.getVar(t)}),r},o.prototype.getVarsList=function(){var e=this,r=[];return this.$varNames.forEach(function(t){r.push(e.getVar(t))}),r},o.prototype.setPath=function(t){return this.$parts=t.split("/")},o.prototype.getPath=function(){return this.$parts.join("/")},o);function o(t,e){this.$regexp=/{([\w\?]+)}/g,this.$patterns={},this.$vars=t.split("/"),this.$varNames=this.$regexp.exec(t)||[],"string"==typeof e&&this.setPath(e)}r.default=n},{}],7:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var u,s=i(t("../controller")),a=i(t("../paths")),o=(u=s.default,o(c,u),c);function c(t){var e=this,r=t.path,t=t.route;return(e=u.call(this)||this).pathName=r.getPath(),r instanceof a.default&&(t.callback?e.content=t.callback.apply(e,r.getVarsList()):t.controller&&(e.content=(t=t.controller).invoke.apply(t,r.getVarsList()))),e}r.default=o},{"../controller":1,"../paths":6}],8:[function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var o=n(t("../controller")),i=t("../utils"),t=(u.prototype.all=function(){return this.$routes},u.get=function(t,e){this.register("GET",t,e)},u.post=function(t,e){this.register("POST",t,e)},u.any=function(t,e){this.get(t,e),this.post(t,e)},u.pattern=function(t,e){return this.getInstance().$patterns.push({name:t,pattern:e})},u.getInstance=function(){return this.$instance||(this.$instance=new u),this.$instance},u.getPatterns=function(){return this.getInstance().$patterns},u.register=function(t,e,r){if(r instanceof o.default){var n=r;this.getInstance().$routes.push({path:e,controller:n,method:t})}else{if("function"!=typeof r)return i.debug("19458","controllerOrCallback","function");r=r;this.getInstance().$routes.push({path:e,callback:r,method:t})}},u);function u(){this.$patterns=[],this.$routes=[]}r.default=t},{"../controller":1,"../utils":9}],9:[function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},u=this&&this.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),o=0,e=0;e<r;e++)for(var i=arguments[e],u=0,s=i.length;u<s;u++,o++)n[o]=i[u];return n};Object.defineProperty(r,"__esModule",{value:!0}),r.debug=r.watchPrefix=r.capslock=void 0;var s=i(t("../errors"));r.capslock=function(t,e){void 0===e&&(e=" ");var r=t.split(e);return r.forEach(function(t,e){t=t.split("");t[0]=t[0].toUpperCase(),r[e]=t.join("")}),r.join(e)};r.watchPrefix=function(t,e){return 0!==t.indexOf(e)?e.concat(t):t};r.debug=function(t){for(var e,r,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];for(r in s)if(!(r in new Object)&&s[r].typeCode==t)throw new((e=s[r]).bind.apply(e,u([void 0],n)))}},{"../errors":3}]},{},[5])(5)});